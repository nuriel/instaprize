(function(h){function d(a,b){if(this instanceof d)return this.apiurl=a+"/api",void 0!=b&&null!=b&&(this.socket=new e(a,b,this)),this}function e(a,b,f){this.baseurl=a;this.channel=b;this.handlers=[];this.nexuClient=f;return this}e.prototype.setMessageHandler=function(a,b){this.handlers["_"+a]=b};e.prototype.setDefaultHandler=function(a){this.defaultHandler=a};e.prototype.connect=function(){if(void 0===this.socket||!this.socket.socket.connected){this.socket=io.connect(this.baseurl+"/"+this.channel,
{resource:"ns"});var a=this;this.socket.on("message",function(b){a.messageHandler(b)})}};e.prototype.setState=function(a,b,f){b={state:b,payload:f};if(a===d.SocketChannels.ALL)for(c in d.SocketChannels)d.SocketChannels[c]!==d.SocketChannels.ALL&&d.SocketChannels[c]!==this.channel&&this.sendMessage(d.SocketChannels[c],b);else this.sendMessage(a,b)};e.prototype.messageHandler=function(a){var b=a.payload;console.log("New Message from: "+a.from+" to: "+a.to);console.log(a);if(void 0===b)console.log("Message does not contain a payload. Not doing anything");
else if("function"===typeof this.handlers["_"+b.state])this.handlers["_"+b.state](b.state,b.payload);else"function"===typeof this.defaultHandler?this.defaultHandler(b.state,b.payload):console.log("Event handler  "+b.state+" is not defined in /"+this.channel)};e.prototype.sendMessage=function(a,b){this.socket.emit("message",{to:a,payload:b})};d.SocketChannels={CLIENT:"instaprize_client",SCREEN:"instaprize_screen",MANAGER:"instaprize_manager",ALL:"all"};NexuCookies=function(a){this.cookieName="Nexu_"+
a;this.cookieExpirtationHours=5;var b;a:{var a=this.cookieName,f,d,e,g=document.cookie.split(";");for(f=0;f<g.length;f++)if(d=g[f].substr(0,g[f].indexOf("=")),e=g[f].substr(g[f].indexOf("=")+1),d=d.replace(/^\s+|\s+$/g,""),d==a){b=unescape(e);break a}}this.cookieString=b;this.answeredQuestionArray=void 0!==this.cookieString?this.cookieString.split("|"):[]};NexuCookies.prototype.addQuestionToCookie=function(a){this.cookieString=void 0===this.cookieString?a:this.cookieString+(this.cookieString+"|"+
a);this.answeredQuestionArray.splice(0,0,a);var a=this.cookieName,b=this.cookieString,d=this.cookieExpirtationHours,e=new Date;e.setHours(e.getHours()+d);b=escape(b)+"; expires="+e.toUTCString();document.cookie=a+"="+b};NexuCookies.prototype.answeredQuestionBefore=function(a){return 0<=this.answeredQuestionArray.indexOf(a)?!0:!1};h.Nexu||(h.Nexu=d)})(this);